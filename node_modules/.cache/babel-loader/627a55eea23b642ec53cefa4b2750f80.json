{"ast":null,"code":"var _jsxFileName = \"D:\\\\Xammp\\\\xammp\\\\htdocs\\\\soaltest\\\\src\\\\pages\\\\fileupload.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link, Redirect } from 'react-router-dom';\nimport Header from \"../elements/header\";\nimport Sidebar from \"../elements/sidebar\";\nimport Moment from 'react-moment';\nexport default class FileUploadPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      files: [],\n      redirect: false,\n      isLoading: false\n    };\n\n    this.handleChange = event => {\n      event.preventDefault();\n      this.file = event.target.files[0];\n      document.getElementById('fileLabel').innerHTML = event.target.files[0].name;\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      this.setState({\n        isLoading: true\n      });\n      let bodyFormData = new FormData();\n      bodyFormData.append('file', this.file);\n      bodyFormData.set('token', this.token);\n      axios.post(this.url + 'fileupload', bodyFormData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(result => {\n        if (result.data.status) {\n          this.componentDidMount();\n          this.setState({\n            redirect: true,\n            isLoading: false\n          });\n          document.getElementById('fileInput').value = \"\";\n          document.getElementById('fileLabel').innerHTML = \"Choose file\";\n        }\n      }).catch(error => {\n        this.setState({\n          toDashboard: true\n        });\n        console.log(error);\n      });\n    };\n\n    this.renderRedirect = () => {\n      if (this.state.redirect) {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: \"/fileupload\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 20\n          }\n        });\n      }\n    };\n\n    this.handleClickDelete = event => {\n      const id = event.target.value;\n      document.getElementById('delete' + id).classList.remove('d-none');\n      const preview = document.querySelectorAll('.delete' + id);\n      preview[0].setAttribute(\"disabled\", true);\n      axios.delete(this.url + 'filedelete/' + id, {\n        params: {\n          token: this.token\n        }\n      }).then(response => {\n        this.componentDidMount();\n      }).catch(error => {\n        console.log(error.toString());\n        this.componentDidMount();\n      });\n    };\n\n    this.file = '';\n    this.url = 'https://gowtham-rest-api-crud.herokuapp.com/';\n    this.token = localStorage.getItem('token');\n  }\n\n  componentDidMount() {\n    axios.get(this.url + 'fileupload', {\n      params: {\n        token: this.token\n      }\n    }).then(response => {\n      const files = response.data.data.files;\n      this.setState({\n        files: files\n      });\n    }).catch(error => {\n      this.setState({\n        toDashboard: true\n      });\n      console.log(error);\n    });\n  }\n\n  getYear() {\n    return new Date().getFullYear();\n  }\n\n  render() {\n    const isLoading = this.state.isLoading;\n\n    if (this.state.toDashboard === true) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 20\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Sidebar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"content-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"ol\", {\n      className: \"breadcrumb\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      className: \"breadcrumb-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: '/dashboard',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 37\n      }\n    }, \"Dashboard\")), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"breadcrumb-item active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 33\n      }\n    }, \"File Upload\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card mx-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 33\n      }\n    }, \"File Upload\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group input-group-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"custom-file\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 57\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      onChange: this.handleChange,\n      className: \"custom-file-input\",\n      id: \"fileInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 61\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"custom-file-label\",\n      id: \"fileLabel\",\n      htmlFor: \"fileInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 65\n      }\n    }, \"Choose file\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-label-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary btn-block\",\n      type: \"submit\",\n      disabled: this.state.isLoading ? true : false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 57\n      }\n    }, \"Upload \\xA0\\xA0\\xA0\", isLoading ? /*#__PURE__*/React.createElement(\"span\", {\n      className: \"spinner-border spinner-border-sm\",\n      role: \"status\",\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 65\n      }\n    }) : /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 65\n      }\n    }))))))), this.renderRedirect())), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        padding: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-bordered\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 41\n      }\n    }, \"id\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 41\n      }\n    }, \"image\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 41\n      }\n    }, \"Created\"), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 41\n      }\n    }, \"Aksi\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 37\n      }\n    }, this.state.files.map((files, index) => /*#__PURE__*/React.createElement(\"tr\", {\n      key: files.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 45\n      }\n    }, index + 1), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: this.url + '/uploads/students/' + files.name,\n      style: {\n        height: 50\n      },\n      alt: files.name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 49\n      }\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(Moment, {\n      format: \"YYYY-MM-DD\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 49\n      }\n    }, files.created_at)), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      value: files.id,\n      className: 'btn btn-sm btn-danger delete' + files.id,\n      onClick: this.handleClickDelete,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 49\n      }\n    }, \"Delete \\xA0\\xA0\\xA0\", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"spinner-border spinner-border-sm d-none\",\n      id: 'delete' + files.id,\n      role: \"status\",\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 57\n      }\n    }))))))))), /*#__PURE__*/React.createElement(\"footer\", {\n      className: \"sticky-footer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container my-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"copyright text-center my-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 37\n      }\n    }, \"Test \", this.getYear())))))));\n  }\n\n}","map":{"version":3,"sources":["D:/Xammp/xammp/htdocs/soaltest/src/pages/fileupload.js"],"names":["React","Component","axios","Link","Redirect","Header","Sidebar","Moment","FileUploadPage","constructor","props","state","files","redirect","isLoading","handleChange","event","preventDefault","file","target","document","getElementById","innerHTML","name","handleSubmit","setState","bodyFormData","FormData","append","set","token","post","url","headers","then","result","data","status","componentDidMount","value","catch","error","toDashboard","console","log","renderRedirect","handleClickDelete","id","classList","remove","preview","querySelectorAll","setAttribute","delete","params","response","toString","localStorage","getItem","get","getYear","Date","getFullYear","render","padding","map","index","height","created_at"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport {Link, Redirect} from 'react-router-dom';\nimport Header from \"../elements/header\";\nimport Sidebar from \"../elements/sidebar\";\nimport Moment from 'react-moment';\n\nexport default class FileUploadPage extends Component {\n\n    constructor(props) {\n        super(props);\n        this.file = '';\n        this.url = 'https://gowtham-rest-api-crud.herokuapp.com/';\n        this.token = localStorage.getItem('token');\n    }\n\n    state = {\n        files: [],\n        redirect: false,\n        isLoading: false,\n    };\n\n    componentDidMount() {\n        axios.get(this.url + 'fileupload', { params: { token: this.token}})\n            .then(response => {\n                const files = response.data.data.files;\n                this.setState({ files: files });\n            })\n            .catch(error => {\n                this.setState({ toDashboard: true });\n                console.log(error);\n            });\n\n    }\n\n    handleChange = event => {\n        event.preventDefault();\n        this.file = event.target.files[0];\n        document.getElementById('fileLabel').innerHTML = event.target.files[0].name;\n    };\n\n    handleSubmit = event => {\n        event.preventDefault();\n        this.setState({isLoading: true});\n        let bodyFormData = new FormData();\n        bodyFormData.append('file', this.file);\n        bodyFormData.set('token', this.token);\n        axios.post(this.url + 'fileupload', bodyFormData, {\n                headers: {\n                    'Content-Type': 'multipart/form-data'\n                }})\n            .then(result => {\n                if (result.data.status) {\n                    this.componentDidMount();\n                    this.setState({redirect: true, isLoading: false});\n                    document.getElementById('fileInput').value = \"\";\n                    document.getElementById('fileLabel').innerHTML = \"Choose file\";\n                }\n            })\n            .catch(error => {\n                this.setState({ toDashboard: true });\n                console.log(error);\n            });\n    };\n\n    getYear() {\n        return new Date().getFullYear();\n    };\n\n    renderRedirect = () => {\n        if (this.state.redirect) {\n            return <Redirect to='/fileupload' />\n        }\n    };\n\n    handleClickDelete = event => {\n        const id = event.target.value;\n        document.getElementById('delete' + id).classList.remove('d-none');\n        const preview = document.querySelectorAll ('.delete' + id);\n        preview[0].setAttribute(\"disabled\", true);\n        axios.delete(this.url + 'filedelete/' + id , { params: { token: this.token}})\n            .then(response => {\n                this.componentDidMount();\n            })\n            .catch( error => {\n                console.log(error.toString());\n                this.componentDidMount();\n            });\n    };\n\n    render() {\n        const isLoading = this.state.isLoading;\n        if (this.state.toDashboard === true) {\n            return <Redirect to='/' />\n        }\n        return (\n            <div>\n                <Header/>\n                <div id=\"wrapper\">\n                    <Sidebar></Sidebar>\n                    <div id=\"content-wrapper\">\n                        <div className=\"container-fluid\">\n                            <ol className=\"breadcrumb\">\n                                <li className=\"breadcrumb-item\">\n                                    <Link to={'/dashboard'} >Dashboard</Link>\n                                </li>\n                                <li className=\"breadcrumb-item active\">File Upload</li>\n                            </ol>\n                        </div>\n                        <div className=\"container-fluid\">\n                            <div className=\"card mx-auto\">\n                                <div className=\"card-header\">File Upload</div>\n                                <div className=\"card-body\">\n                                    <form onSubmit={this.handleSubmit}>\n                                        <div className=\"form-group\">\n                                            <div className=\"form-row\">\n                                                <div className=\"col-md-6\">\n                                                    <div className=\"input-group input-group-lg\">\n                                                        <div className=\"custom-file\">\n                                                            <input type=\"file\" onChange={this.handleChange}  className=\"custom-file-input\" id=\"fileInput\"/>\n                                                                <label className=\"custom-file-label\" id=\"fileLabel\" htmlFor=\"fileInput\">Choose file</label>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div className=\"col-md-6\">\n                                                    <div className=\"form-label-group\">\n                                                        <button className=\"btn btn-primary btn-block\" type=\"submit\" disabled={this.state.isLoading ? true : false}>Upload &nbsp;&nbsp;&nbsp;\n                                                            {isLoading ? (\n                                                                <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n                                                            ) : (\n                                                                <span></span>\n                                                            )}\n                                                        </button>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                    </form>\n                                    {this.renderRedirect()}\n                                </div>\n                            </div>\n                            <div style={{padding:10}}></div>\n                            <div className=\"table\">\n                                <table className=\"table table-bordered\">\n                                    <thead>\n                                    <tr>\n                                        <th>id</th>\n                                        <th>image</th>\n                                        <th>Created</th>\n                                        <th className=\"text-center\">Aksi</th>\n                                    </tr>\n                                    </thead>\n                                    <tbody>\n                                    {this.state.files.map((files , index)=>\n                                        <tr key={files.id}>\n                                            <td>{index + 1}</td>\n                                            <td><img src={this.url + '/uploads/students/' + files.name} style={{height:50}} alt={files.name} /></td>\n                                            <td>\n                                                <Moment format=\"YYYY-MM-DD\">{files.created_at}</Moment>\n                                            </td>\n                                            <td className=\"text-center\">\n                                                <button value={files.id}  className={'btn btn-sm btn-danger delete' + files.id } onClick={this.handleClickDelete} >Delete &nbsp;&nbsp;&nbsp;\n                                                        <span className=\"spinner-border spinner-border-sm d-none\" id={'delete'+files.id} role=\"status\" aria-hidden=\"true\"></span>\n                                                </button>\n                                            </td>\n                                        </tr>)\n                                    }\n                                    </tbody>\n                                </table>\n                            </div>\n                        </div>\n\n                        <footer className=\"sticky-footer\">\n                            <div className=\"container my-auto\">\n                                <div className=\"copyright text-center my-auto\">\n                                    <span>Test {this.getYear()}</span>\n                                </div>\n                            </div>\n                        </footer>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\n\n"]},"metadata":{},"sourceType":"module"}